<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Trap Club du Temple - Actualités</title>
    <meta name="description" content="Découvrez le Ball Trap Club du Temple : actualités, pratique, initiation et événements sportifs dans un cadre exceptionnel.">

    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../styles/actualite.css">

    <!-- Favicon -->
    <link rel="icon" href="../favicon_io/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon_io/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon_io/apple-touch-icon.png">
    <link rel="manifest" href="../favicon_io/site.webmanifest">

    <!-- Open Graph -->
    <meta property="og:title" content="Ball Trap Club du Temple">
    <meta property="og:description" content="Rejoignez notre club de ball trap pour la pratique, les compétitions et une ambiance conviviale !">
    <meta property="og:image" content="https://media.istockphoto.com/id/525242061/fr/vectoriel/ball-trap.jpg?s=612x612&w=0&k=20&c=7dgwA9twnfKPKVLv02psIdEgr-4aPsZsySCNrDX0cs8=">
    <meta property="og:url" content="https://ton-site.fr">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="fr_FR">

    <!-- Librairie Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    
    <nav id="nav" class="no_image">
        <a href="../index.html"><img src="../favicon_io/apple-touch-icon.png" alt="icone du club" class="site-icon"></a>
        <ul>
            <li><a href="../index.html">Accueil</a></li>
            <li><a href="actualites.html">Actualités</a></li>
            <li><a href="initiation.html">Initiation</a></li>
            <li><a href="inscription.html">Inscription et tarifs</a></li>
            <li><a href="https://inscriptionweb.fr/InscriptionWeb2?ID_Concours=&Date_Concours=" target="_blank">Inscription Championnat</a></li>
            <li><a href="nous-contacter.html">Nous contacter</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="galerie.html">Galerie</a></li>
        </ul>
        <div id="icons"></div>
    </nav>

    <header class="actualites-header">
        <h2>Actualités</h2>
    </header>

    <div id="articles-list">
        <p>Chargement des articles...</p>
    </div>

    <script>
        async function loadArticles() {
            const container = document.getElementById('articles-list');
            try {
                const res = await fetch('../content/actualites/articles.json');
                if (!res.ok) throw new Error('JSON introuvable');
                const articles = await res.json();

                container.innerHTML = ''; // vide le container

                if (!articles.length) {
                    container.innerHTML = '<p>Aucun article pour le moment.</p>';
                    return;
                }

                // Tri par date décroissante
                articles.sort((a,b) => new Date(b.date) - new Date(a.date));

                articles.forEach(article => {
                    const div = document.createElement('div');
                    div.classList.add('article');
                    div.innerHTML = `
                        <h2>${article.title}</h2>
                        <p><em>${new Date(article.date).toLocaleDateString('fr-FR')}</em></p>
                        <div>${marked.parse(article.body)}</div>
                        ${article.image ? `<img src="${article.image}" alt="${article.title}" class="article-image">` : ''}
                        <hr>
                    `;
                    container.appendChild(div);
                });
            } catch (err) {
                console.error('Erreur chargement articles:', err);
                container.innerHTML = '<p>Impossible de charger les articles pour le moment.</p>';
            }
        }

        loadArticles();
    </script>

    <footer>
        <div class="footer">
            <p>© 2025 - Club de Ball-Trap du Temple</p>
            <p><a href="mentions-legales.html">Mentions légales</a> | Affilié <a href="https://ffbt.asso.fr">FFBT</a></p>
        </div>
    </footer>

    <p><a href="#top">&#x2191;</a></p>

    <script>
        window.addEventListener('scroll', ()=> {
            const nav = document.querySelector('nav');
            const triggerHeight = window.innerHeight*0.65;

            if (window.scrollY > triggerHeight) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });
    </script>

    <script src="../index.js"></script>

</body>
</html>
